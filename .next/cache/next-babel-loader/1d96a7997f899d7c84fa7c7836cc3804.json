{"ast":null,"code":"import getConfig from 'next/config';\nimport Airtable from 'airtable';\nimport { verify } from 'jsonwebtoken';\nconst {\n  serverRuntimeConfig\n} = getConfig();\nexport default (async (req, res) => {\n  console.log(req.body);\n  const {\n    base,\n    table,\n    initialState\n  } = verify(req.body.jwt, serverRuntimeConfig.appSecret);\n  const at = new Airtable({\n    apiKey: serverRuntimeConfig.airtableKey\n  }).base(base)(table);\n  const result = await (await at.select({\n    maxRecords: 1,\n    filterByFormula: `{Status} = '${initialState}'`\n  })).firstPage();\n  res.send(result[0] || {});\n});","map":{"version":3,"sources":["/home/x/VCS/github.com/codeday/labs-review/src/pages/api/get-entry.js"],"names":["getConfig","Airtable","verify","serverRuntimeConfig","req","res","console","log","body","base","table","initialState","jwt","appSecret","at","apiKey","airtableKey","result","select","maxRecords","filterByFormula","firstPage","send"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,aAAtB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,SAASC,MAAT,QAAuB,cAAvB;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAA0BH,SAAS,EAAzC;AAEA,gBAAe,OAAOI,GAAP,EAAYC,GAAZ,KAAoB;AACjCC,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;AACA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA;AAAf,MAAgCT,MAAM,CAACE,GAAG,CAACI,IAAJ,CAASI,GAAV,EAAeT,mBAAmB,CAACU,SAAnC,CAA5C;AACA,QAAMC,EAAE,GAAG,IAAIb,QAAJ,CAAa;AAAEc,IAAAA,MAAM,EAAEZ,mBAAmB,CAACa;AAA9B,GAAb,EAA0DP,IAA1D,CAA+DA,IAA/D,EAAqEC,KAArE,CAAX;AACA,QAAMO,MAAM,GAAG,MAAM,CAAC,MAAMH,EAAE,CAACI,MAAH,CAAU;AAAEC,IAAAA,UAAU,EAAE,CAAd;AAAiBC,IAAAA,eAAe,EAAG,eAAcT,YAAa;AAA9D,GAAV,CAAP,EAAqFU,SAArF,EAArB;AACAhB,EAAAA,GAAG,CAACiB,IAAJ,CAASL,MAAM,CAAC,CAAD,CAAN,IAAa,EAAtB;AACD,CAND","sourcesContent":["import getConfig from 'next/config';\nimport Airtable from 'airtable';\nimport { verify } from 'jsonwebtoken';\n\nconst { serverRuntimeConfig } = getConfig();\n\nexport default async (req, res) => {\n  console.log(req.body);\n  const { base, table, initialState } = verify(req.body.jwt, serverRuntimeConfig.appSecret);\n  const at = new Airtable({ apiKey: serverRuntimeConfig.airtableKey }).base(base)(table);\n  const result = await (await at.select({ maxRecords: 1, filterByFormula: `{Status} = '${initialState}'`})).firstPage();\n  res.send(result[0] || {});\n}\n"]},"metadata":{},"sourceType":"module"}