{"ast":null,"code":"import getConfig from 'next/config';\nimport { sign } from 'jsonwebtoken';\nconst {\n  serverRuntimeConfig\n} = getConfig();\nexport default (async (req, res) => {\n  const {\n    password,\n    base,\n    table,\n    initialState,\n    resultStates,\n    track\n  } = req.body;\n  if (password !== serverRuntimeConfig.appPassword) return res.send('bad password');\n  return res.send(sign({\n    base,\n    table,\n    initialState,\n    resultStates,\n    track\n  }, serverRuntimeConfig.appSecret, {\n    expiresIn: \"7d\"\n  }));\n});","map":{"version":3,"sources":["/home/x/VCS/github.com/codeday/labs-review/src/pages/api/link.js"],"names":["getConfig","sign","serverRuntimeConfig","req","res","password","base","table","initialState","resultStates","track","body","appPassword","send","appSecret","expiresIn"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,aAAtB;AACA,SAASC,IAAT,QAAqB,cAArB;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAA0BF,SAAS,EAAzC;AAEA,gBAAe,OAAOG,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,IAAZ;AAAkBC,IAAAA,KAAlB;AAAyBC,IAAAA,YAAzB;AAAuCC,IAAAA,YAAvC;AAAqDC,IAAAA;AAArD,MAA+DP,GAAG,CAACQ,IAAzE;AAEA,MAAIN,QAAQ,KAAKH,mBAAmB,CAACU,WAArC,EAAkD,OAAOR,GAAG,CAACS,IAAJ,CAAS,cAAT,CAAP;AAClD,SAAOT,GAAG,CAACS,IAAJ,CAASZ,IAAI,CAAC;AAAEK,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA,YAAf;AAA6BC,IAAAA,YAA7B;AAA2CC,IAAAA;AAA3C,GAAD,EAAqDR,mBAAmB,CAACY,SAAzE,EAAoF;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAApF,CAAb,CAAP;AACD,CALD","sourcesContent":["import getConfig from 'next/config';\nimport { sign } from 'jsonwebtoken';\n\nconst { serverRuntimeConfig } = getConfig();\n\nexport default async (req, res) => {\n  const { password, base, table, initialState, resultStates, track } = req.body;\n\n  if (password !== serverRuntimeConfig.appPassword) return res.send('bad password');\n  return res.send(sign({ base, table, initialState, resultStates, track }, serverRuntimeConfig.appSecret, { expiresIn: \"7d\" }));\n}\n"]},"metadata":{},"sourceType":"module"}